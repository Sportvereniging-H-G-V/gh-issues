<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GitHub Issues – Sportvereniging H.G.V.</title>
  <style>
    :root {
      --bg: #0d1117;
      --surface: #161b22;
      --surface-hover: #21262d;
      --border: #30363d;
      --text: #e6edf3;
      --muted: #8b949e;
      --accent: #58a6ff;
      --success: #3fb950;
      --error: #f85149;
    }
    * { box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', sans-serif;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      padding: 2rem;
      min-height: 100vh;
    }
    .container {
      max-width: 720px;
      margin: 0 auto;
    }
    a {
      color: var(--accent);
      text-decoration: none;
    }
    a:hover { text-decoration: underline; }
    h1 {
      font-size: 1.75rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }
    .subtitle {
      color: var(--muted);
      font-size: 1rem;
      margin-bottom: 1.5rem;
    }
    .intro {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1.25rem 1.5rem;
      margin-bottom: 2rem;
      font-size: 0.95rem;
      line-height: 1.6;
    }
    .intro p { margin: 0 0 0.75rem; }
    .intro p:last-child { margin-bottom: 0; }
    .intro strong { color: var(--text); }
    .repo-grid {
      display: grid;
      gap: 0.75rem;
    }
    .repo-card {
      display: block;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1rem 1.25rem;
      color: var(--text);
      transition: background 0.15s, border-color 0.15s;
    }
    .repo-card:hover {
      background: var(--surface-hover);
      border-color: var(--accent);
      text-decoration: none;
    }
    .repo-card .name {
      font-weight: 600;
      font-size: 1rem;
    }
    .repo-card .desc {
      color: var(--muted);
      font-size: 0.85rem;
      margin-top: 0.25rem;
    }
    .loading {
      color: var(--muted);
      padding: 1rem 0;
    }
    .error {
      color: var(--error);
      padding: 1rem 0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>GitHub Issues – Sportvereniging H.G.V.</h1>
    <p class="subtitle">Kies een repository om issues te bekijken of aan te maken.</p>

    <div class="intro">
      <p><strong>Wat doet deze pagina?</strong> Hier kun je eenvoudig issues aanmaken voor de GitHub-repositories van Sportvereniging H.G.V. Per repository kun je kiezen uit drie soorten issues: <strong>contentwijziging</strong>, <strong>technisch probleem</strong> (bug) of <strong>nieuwe functie</strong>. Elk type heeft een eigen formulier met de juiste vragen.</p>
      <p>Selecteer hieronder een repository. Op de volgende pagina vind je de drie opties om een nieuw issue aan te maken en een overzicht van bestaande issues.</p>
    </div>

    <h2 style="font-size: 1.1rem; margin-bottom: 0.75rem;">Repository kiezen</h2>
    <div id="repos" class="repo-grid">
      <div class="loading">Repositories laden…</div>
    </div>
  </div>

  <script>
    const reposEl = document.getElementById('repos');

    async function loadRepos() {
      try {
        const res = await fetch('/api/repos');
        const data = await res.json();
        if (!res.ok) throw new Error(data.detail || data.error || 'Fout bij ophalen');
        if (!data.length) {
          reposEl.innerHTML = '<p class="error">Geen repositories gevonden.</p>';
          return;
        }
        reposEl.innerHTML = data.map((r) => {
          const desc = r.description ? `<span class="desc">${escapeHtml(r.description)}</span>` : '';
          return `<a class="repo-card" href="repo.html?repo=${encodeURIComponent(r.name)}">
            <span class="name">${escapeHtml(r.name)}</span>
            ${desc}
          </a>`;
        }).join('');
      } catch (e) {
        reposEl.innerHTML = '<p class="error">Fout: ' + escapeHtml(e.message) + '</p>';
      }
    }

    function escapeHtml(s) {
      const div = document.createElement('div');
      div.textContent = s;
      return div.innerHTML;
    }

    loadRepos();
  </script>
</body>
</html>
